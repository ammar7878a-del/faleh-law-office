@echo off
chcp 65001 >nul
title ูุธุงู ุฅุฏุงุฑุฉ ููุชุจ ุงููุญุงูุงุฉ - ุชุดุบูู ุขูู

echo ================================================================
echo ๐๏ธ  ูุธุงู ุฅุฏุงุฑุฉ ููุชุจ ุงููุญุงูุงุฉ
echo โ๏ธ  Law Office Management System  
echo ================================================================
echo.

echo ๐ ูุญุต ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช...

REM ูุญุต ูุชุบูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
if defined DATABASE_URL (
    echo โ ุชู ุงูุนุซูุฑ ุนูู ูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุฑุฌูุฉ!
    echo ๐ ุงูุจูุงูุงุช ูุญููุธุฉ ุฏุงุฆูุงู - ูู ุชูุญุฐู ุฃุจุฏุงู!
    echo ๐ ูุดููุฉ ููุฏุงู ุงูุจูุงูุงุช ูุญูููุฉ!
    set DATABASE_OK=1
) else (
    echo ๐จ ุชุญุฐูุฑ: ูุง ุชูุฌุฏ ูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุฑุฌูุฉ!
    echo โ๏ธ  ุงูุจูุงูุงุช ุณุชูุญุฐู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู!
    echo ๐ฅ ูุฐุง ูุนูู ุฃู ุฌููุน ุงูุจูุงูุงุช ุณุชููุฏ!
    echo.
    echo ๐ง ูุญู ูุฐู ุงููุดููุฉ:
    echo    1. ุฑุงุฌุน ููู QUICK_DATABASE_FIX.md
    echo    2. ุฃูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช ูุฌุงููุฉ ุนูู Supabase
    echo    3. ุฃุถู ูุชุบูุฑ DATABASE_URL ูู ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
    echo    4. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู
    echo.
    echo ๐ ุฑุงุจุท Supabase: https://supabase.com
    echo ๐ ุฏููู ุณุฑูุน: QUICK_DATABASE_FIX.md
    set DATABASE_OK=0
)

echo.
echo ================================================================

if %DATABASE_OK%==0 (
    echo ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ
    echo ุชุญุฐูุฑ ููู: ุงูุจูุงูุงุช ุณุชูุญุฐู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู!
    echo ูุญู ูุฐู ุงููุดููุฉุ ุฑุงุฌุน ููู: QUICK_DATABASE_FIX.md
    echo ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ๐จ
    echo.
    set /p continue="ูู ุชุฑูุฏ ุงููุชุงุจุนุฉ ุฑุบู ุฐููุ (y/n): "
    if /i not "%continue%"=="y" if /i not "%continue%"=="yes" (
        echo ุชู ุฅูุบุงุก ุงูุชุดุบูู.
        pause
        exit /b
    )
)

echo.
echo ๐ฏ ุงูุชุทุจูู ุฌุงูุฒ ููุชุดุบูู!
pause

echo.
echo ๐ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู...
echo โณ ูุฑุฌู ุงูุงูุชุธุงุฑ...
echo.

REM ุชุดุบูู ุงูุชุทุจูู
if exist "final_working.py" (
    python final_working.py
) else if exist "app.py" (
    python app.py
) else (
    echo โ ููู ุงูุชุทุจูู ุบูุฑ ููุฌูุฏ!
    echo ุชุฃูุฏ ูู ูุฌูุฏ final_working.py ุฃู app.py
    pause
    exit /b 1
)

echo.
echo ๐ ุชู ุฅููุงู ุงูุชุทุจูู
pause
